<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OriginByte</title>

<link type="text/css" rel="stylesheet" href="./assets/style.css">

</head>
<body>
<nav>
<a href="./index.html">
    <img src="./assets/accent.svg" style="position: absolute">
    <img src="./assets/ob.svg" class="logo">
</a>
<h3>Modules</h3>
<ul><li>
<a href="./err.html">err</a>
<ul class="methods"></ul></li><li>
<a href="./utils.html">utils</a>
<ul class="methods"><li data-type="struct">
    <a href="./utils.html#Marker">Marker</a>       
</li></ul></li><li>
<a href="./supply.html">supply</a>
<ul class="methods"><li data-type="struct">
    <a href="./supply.html#Supply">Supply</a>       
</li></ul></li><li>
<a href="./supply_policy.html">supply_policy</a>
<ul class="methods"><li data-type="struct">
    <a href="./supply_policy.html#SupplyPolicy">SupplyPolicy</a>       
</li></ul></li><li>
<a href="./collection.html">collection</a>
<ul class="methods"><li data-type="struct">
    <a href="./collection.html#BurnEvent">BurnEvent</a>       
</li><li data-type="struct">
    <a href="./collection.html#Collection">Collection</a>       
</li><li data-type="struct">
    <a href="./collection.html#MintCap">MintCap</a>       
</li><li data-type="struct">
    <a href="./collection.html#MintEvent">MintEvent</a>       
</li></ul></li><li>
<a href="./attribution.html">attribution</a>
<ul class="methods"><li data-type="struct">
    <a href="./attribution.html#Witness">Witness</a>       
</li><li data-type="struct">
    <a href="./attribution.html#AttributionDomain">AttributionDomain</a>       
</li><li data-type="struct">
    <a href="./attribution.html#Creator">Creator</a>       
</li></ul></li><li>
<a href="./transfer_whitelist.html">transfer_whitelist</a>
<ul class="methods"><li data-type="struct">
    <a href="./transfer_whitelist.html#CollectionControlCap">CollectionControlCap</a>       
</li><li data-type="struct">
    <a href="./transfer_whitelist.html#Whitelist">Whitelist</a>       
</li></ul></li><li>
<a href="./royalties.html">royalties</a>
<ul class="methods"><li data-type="struct">
    <a href="./royalties.html#TradePayment">TradePayment</a>       
</li></ul></li><li>
<a href="./trading.html">trading</a>
<ul class="methods"><li data-type="struct">
    <a href="./trading.html#AskCommission">AskCommission</a>       
</li><li data-type="struct">
    <a href="./trading.html#BidCommission">BidCommission</a>       
</li></ul></li><li>
<a href="./nft.html">nft</a>
<ul class="methods"><li data-type="struct">
    <a href="./nft.html#Nft">Nft</a>       
</li></ul></li><li>
<a href="./unprotected_safe.html">unprotected_safe</a>
<ul class="methods"><li data-type="struct">
    <a href="./unprotected_safe.html#DepositEvent">DepositEvent</a>       
</li><li data-type="struct">
    <a href="./unprotected_safe.html#NftRef">NftRef</a>       
</li><li data-type="struct">
    <a href="./unprotected_safe.html#OwnerCap">OwnerCap</a>       
</li><li data-type="struct">
    <a href="./unprotected_safe.html#TransferCap">TransferCap</a>       
</li><li data-type="struct">
    <a href="./unprotected_safe.html#TransferEvent">TransferEvent</a>       
</li><li data-type="struct">
    <a href="./unprotected_safe.html#UnprotectedSafe">UnprotectedSafe</a>       
</li></ul></li><li>
<a href="./safe.html">safe</a>
<ul class="methods"><li data-type="struct">
    <a href="./safe.html#OwnerCap">OwnerCap</a>       
</li><li data-type="struct">
    <a href="./safe.html#TransferCap">TransferCap</a>       
</li><li data-type="struct">
    <a href="./safe.html#Safe">Safe</a>       
</li></ul></li><li>
<a href="./bidding.html">bidding</a>
<ul class="methods"><li data-type="struct">
    <a href="./bidding.html#Witness">Witness</a>       
</li><li data-type="struct">
    <a href="./bidding.html#Bid">Bid</a>       
</li><li data-type="struct">
    <a href="./bidding.html#BidClosed">BidClosed</a>       
</li><li data-type="struct">
    <a href="./bidding.html#BidCreated">BidCreated</a>       
</li></ul></li><li>
<a href="./display.html">display</a>
<ul class="methods"><li data-type="struct">
    <a href="./display.html#Witness">Witness</a>       
</li><li data-type="struct">
    <a href="./display.html#AttributesDomain">AttributesDomain</a>       
</li><li data-type="struct">
    <a href="./display.html#DisplayDomain">DisplayDomain</a>       
</li><li data-type="struct">
    <a href="./display.html#SymbolDomain">SymbolDomain</a>       
</li><li data-type="struct">
    <a href="./display.html#UrlDomain">UrlDomain</a>       
</li></ul></li><li>
<a href="./proceeds.html">proceeds</a>
<ul class="methods"><li data-type="struct">
    <a href="./proceeds.html#Proceeds">Proceeds</a>       
</li><li data-type="struct">
    <a href="./proceeds.html#QtSold">QtSold</a>       
</li></ul></li><li>
<a href="./object_box.html">object_box</a>
<ul class="methods"><li data-type="struct">
    <a href="./object_box.html#ObjectBox">ObjectBox</a>       
</li></ul></li><li>
<a href="./launchpad.html">launchpad</a>
<ul class="methods"><li data-type="struct">
    <a href="./launchpad.html#Launchpad">Launchpad</a>       
</li></ul></li><li>
<a href="./inventory.html">inventory</a>
<ul class="methods"><li data-type="struct">
    <a href="./inventory.html#Inventory">Inventory</a>       
</li></ul></li><li>
<a href="./slot.html">slot</a>
<ul class="methods"><li data-type="struct">
    <a href="./slot.html#CreateSlotEvent">CreateSlotEvent</a>       
</li><li data-type="struct">
    <a href="./slot.html#DeleteSlotEvent">DeleteSlotEvent</a>       
</li><li data-type="struct">
    <a href="./slot.html#NftCertificate">NftCertificate</a>       
</li><li data-type="struct">
    <a href="./slot.html#Slot">Slot</a>       
</li><li data-type="struct">
    <a href="./slot.html#WhitelistCertificate">WhitelistCertificate</a>       
</li></ul></li><li>
<a href="./dutch_auction.html">dutch_auction</a>
<ul class="methods"><li data-type="struct">
    <a href="./dutch_auction.html#Witness">Witness</a>       
</li><li data-type="struct">
    <a href="./dutch_auction.html#Bid">Bid</a>       
</li><li data-type="struct">
    <a href="./dutch_auction.html#DutchAuctionMarket">DutchAuctionMarket</a>       
</li></ul></li><li>
<a href="./fixed_price.html">fixed_price</a>
<ul class="methods"><li data-type="struct">
    <a href="./fixed_price.html#Witness">Witness</a>       
</li><li data-type="struct">
    <a href="./fixed_price.html#FixedPriceMarket">FixedPriceMarket</a>       
</li></ul></li><li>
<a href="./flat_fee.html">flat_fee</a>
<ul class="methods"><li data-type="struct">
    <a href="./flat_fee.html#FlatFee">FlatFee</a>       
</li></ul></li><li>
<a href="./flyweight.html">flyweight</a>
<ul class="methods"><li data-type="struct">
    <a href="./flyweight.html#BurnEvent">BurnEvent</a>       
</li><li data-type="struct">
    <a href="./flyweight.html#MintEvent">MintEvent</a>       
</li><li data-type="struct">
    <a href="./flyweight.html#Archetype">Archetype</a>       
</li><li data-type="struct">
    <a href="./flyweight.html#Pointer">Pointer</a>       
</li><li data-type="struct">
    <a href="./flyweight.html#Registry">Registry</a>       
</li></ul></li><li>
<a href="./ob.html">ob</a>
<ul class="methods"><li data-type="struct">
    <a href="./ob.html#Witness">Witness</a>       
</li><li data-type="struct">
    <a href="./ob.html#Bid">Bid</a>       
</li><li data-type="struct">
    <a href="./ob.html#BidClosed">BidClosed</a>       
</li><li data-type="struct">
    <a href="./ob.html#BidCreated">BidCreated</a>       
</li><li data-type="struct">
    <a href="./ob.html#Ask">Ask</a>       
</li><li data-type="struct">
    <a href="./ob.html#AskClosed">AskClosed</a>       
</li><li data-type="struct">
    <a href="./ob.html#AskCreated">AskCreated</a>       
</li><li data-type="struct">
    <a href="./ob.html#Orderbook">Orderbook</a>       
</li><li data-type="struct">
    <a href="./ob.html#TradeExecuted">TradeExecuted</a>       
</li><li data-type="struct">
    <a href="./ob.html#TradeIntermediate">TradeIntermediate</a>       
</li><li data-type="struct">
    <a href="./ob.html#WitnessProtectedActions">WitnessProtectedActions</a>       
</li></ul></li><li>
<a href="./royalty_strategy_constant.html">royalty_strategy_constant</a>
<ul class="methods"><li data-type="struct">
    <a href="./royalty_strategy_constant.html#ConstantRoyaltyStrategy">ConstantRoyaltyStrategy</a>       
</li></ul></li><li>
<a href="./royalty_strategy_bps.html">royalty_strategy_bps</a>
<ul class="methods"><li data-type="struct">
    <a href="./royalty_strategy_bps.html#BpsRoyaltyStrategy">BpsRoyaltyStrategy</a>       
</li></ul></li><li>
<a href="./royalty.html">royalty</a>
<ul class="methods"><li data-type="struct">
    <a href="./royalty.html#Witness">Witness</a>       
</li><li data-type="struct">
    <a href="./royalty.html#RoyaltyDomain">RoyaltyDomain</a>       
</li></ul></li><li>
<a href="./tags.html">tags</a>
<ul class="methods"><li data-type="struct">
    <a href="./tags.html#Witness">Witness</a>       
</li><li data-type="struct">
    <a href="./tags.html#Art">Art</a>       
</li><li data-type="struct">
    <a href="./tags.html#Collectible">Collectible</a>       
</li><li data-type="struct">
    <a href="./tags.html#DomainName">DomainName</a>       
</li><li data-type="struct">
    <a href="./tags.html#GameAsset">GameAsset</a>       
</li><li data-type="struct">
    <a href="./tags.html#License">License</a>       
</li><li data-type="struct">
    <a href="./tags.html#Music">Music</a>       
</li><li data-type="struct">
    <a href="./tags.html#ProfilePicture">ProfilePicture</a>       
</li><li data-type="struct">
    <a href="./tags.html#TagDomain">TagDomain</a>       
</li><li data-type="struct">
    <a href="./tags.html#Ticker">Ticker</a>       
</li><li data-type="struct">
    <a href="./tags.html#Ticket">Ticket</a>       
</li><li data-type="struct">
    <a href="./tags.html#TokenisedAsset">TokenisedAsset</a>       
</li><li data-type="struct">
    <a href="./tags.html#Video">Video</a>       
</li></ul></li></ul></nav>
<div id="main"><h1 class="page-title">royalties</h1>
<section class="readme">
    <header>
        <h2>0x0::royalties</h2>
    </header>
    <article>
        <p>To enable custom royalty functionality with current Move design, we need
to create a system in which collection's own implementation can use
priviledge to access the NFT payments, yet anyone can call the royalty
logic to finish their trade.</p>
<p>An instance of collection's struct <code>W</code> (not the one-time-witness!)
enables it to extract funds from <code>TradePayment</code>. After it calculates the
royalty from the NFT payment, it then transfers the rest to the
beneficiary address, be it the NFT seller or a marketplace/wallet.</p>
<p>The trading contracts can design their commission schemes such that the
marketplaces and/or wallets are incentivized to resolve the settlements.
That avoids extra txs sent by the user, because the client
implementation will be such that they include everything in one batched
tx if possible, or have automation.</p>

        <h3 class="subsection-title">Structs</h3>
        <div class="container-overview">
    <h2>TradePayment</h2>
    <span class="name-container">
        <h4 class="name" id="TradePayment">0x0::royalties::TradePayment</h4>
    </span>
    <div class="description"><p><code>W</code> is the collection's witness (not the one time witness!) which
helps us ensure that the right royalty collection logic is operating
on this receipt.</p>
<ol>
<li><code>C</code>ollection one-time-witness</li>
<li><code>F</code>ungible <code>T</code>oken</li>
</ol>
</div>
    <h5>Fields:</h5>
    <table class="params">
        <thead>
            <tr>
                <th>Name</th>
                <th>Type</th>
                <th class="last">Description</th>
            </tr>
        </thead>
        <tbody>
            <tr>
    <td class="name">
        <code>id</code>            
    </td>
    <td class="type">
        <code>object::UID</code>  
    </td>
    <td class="description last"></td>
</tr><tr>
    <td class="name">
        <code>amount</code>            
    </td>
    <td class="type">
        <code>balance::Balance<#1></code>  
    </td>
    <td class="description last"></td>
</tr><tr>
    <td class="name">
        <code>beneficiary</code>            
    </td>
    <td class="type">
        <code>address</code>  
    </td>
    <td class="description last"><p>The address where the amount should be transferred to.
This could be either the payment for the seller or a marketplace's
commision.</p>
</td>
</tr><tr>
    <td class="name">
        <code>trade</code>            
    </td>
    <td class="type">
        <code>option::Option<object::ID></code>  
    </td>
    <td class="description last"><p>Optionally we enable grouping of payments, e.g. if there are
multiple payments for one NFT (such as commission.), it might be
useful for the royalty collection logic to distinguish such
scenario.</p>
</td>
</tr>
        </tbody>
    </table>
</div>
        <h3 class="subsection-title">Methods</h3>
        <span class="name-container">
    <h4 class="name" id="create"><pre>public fun create&lt;C, FT&gt;(
    amount: balance::Balance&lt;FT&gt;,
    beneficiary: address,
    ctx: &amp;mut tx_context::TxContext,
)</pre></h4>
</span>
<div class="description"></div><span class="name-container">
    <h4 class="name" id="create_with_trade"><pre>public fun create_with_trade&lt;C, FT&gt;(
    amount: balance::Balance&lt;FT&gt;,
    beneficiary: address,
    trade: object::ID,
    ctx: &amp;mut tx_context::TxContext,
)</pre></h4>
</span>
<div class="description"></div><span class="name-container">
    <h4 class="name" id="balance"><pre>public fun balance&lt;C, FT&gt;(
    payment: &amp;royalties::TradePayment&lt;C, FT&gt;,
): &amp;balance::Balance&lt;FT&gt;</pre></h4>
</span>
<div class="description"></div><span class="name-container">
    <h4 class="name" id="balance_mut"><pre>public fun balance_mut&lt;C, W: drop, FT&gt;(
    _witness: W,
    payment: &amp;mut royalties::TradePayment&lt;C, FT&gt;,
): &amp;mut balance::Balance&lt;FT&gt;</pre></h4>
</span>
<div class="description"><p><code>W</code> is the collection's witness (not the one time witness!) which
helps us ensure that the right royalty collection logic is operating
on this receipt.</p>
<p>Only the designated witness can access the balance.</p>
<p>Typically, this would be a witness exported from the collection contract
and it would access the balance to calculate the royalty in its custom
implementation.</p>
</div><span class="name-container">
    <h4 class="name" id="beneficiary"><pre>public fun beneficiary&lt;C, FT&gt;(
    payment: &amp;royalties::TradePayment&lt;C, FT&gt;,
): address</pre></h4>
</span>
<div class="description"></div><span class="name-container">
    <h4 class="name" id="transfer_remaining_to_beneficiary"><pre>public fun transfer_remaining_to_beneficiary&lt;
    C,
    W: drop,
    FT,
&gt;(
    _witness: W,
    payment: &amp;mut royalties::TradePayment&lt;C, FT&gt;,
    ctx: &amp;mut tx_context::TxContext,
)</pre></h4>
</span>
<div class="description"></div><span class="name-container">
    <h4 class="name" id="amount"><pre>public fun amount&lt;C, FT&gt;(
    trade_payment: &amp;royalties::TradePayment&lt;C, FT&gt;,
): &amp;balance::Balance&lt;FT&gt;</pre></h4>
</span>
<div class="description"></div>
    </article>
</section><br class="clear">
<!--<footer>OriginByte.io</footer>-->
</div>
</body>
</html>